
Motor:
Bafang model todo
8 pole pairs 


Wiring:

- 3 x Digital Input for RPM from  hall sensors
		PJ0		D4		GPIO	Input		Phase A
		PC8		D5		GPIO	Input		Phase B
		PF7		D6		GPIO	Input		Phase C

- 3 x Digital Output
		PH6		D9		TIM12	CH1		PWM  for load transistor control
		PA11	D10		GPIO	Output		LED on/off switch
		PB15	D11		GPIO	Output		LED serial WS2812


- 5 x Analog inputs for volts, amps, temp, potentiometer, Super cap voltage  

		
		PA6		A0		ADC1	IN6		Rectifier volts
		PA4		A1		ADC1	IN4		Rectifier Amps
		PC2		A2		ADC1	IN12	Temperature
		PF10	A3		ADC3	IN8		Potentiometer
		PF8		A4		ADC3	IN6		SuperCap Volts 
		

- 3 phase rectifier
- Over voltage protection
- Super cap on micro supply line
- 12 v usb car charger

LED driver which outputs light proportional to power. using WS2812 



Electronics:
TPSM560R6HRDAR 60v - 5v  https://www.digikey.com.au/en/products/detail/texas-instruments/TPSM5601R5HRDAR/14004317




MCU:
Devboard is STM32746G-Disco on the MB1191C board version C01 (white sticker on back)
appropriate schematic in project datasheets folder.

Firmware:



disable backlight on PK3 pin. 
tried disabling FMC but no screen afterward
tried disabling quadspi but loses images
could also try disabling i2c3

4ma draw on red LED
power in via right angle header male 2 way then change jumper one position. 
possiby 3 x 5.5v 1F super caps charged to 13volts would give 10 seconds uptime
4688-CHP5R5L105R-TW-ND need three in series with balancing resistors, 0.1 leakage recommended
or 2085-SCAP,PBLS-1.25/21.6-ND

via 
recom R-785.0-1.0 945-1038-ND

